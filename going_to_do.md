# 计划中的内容

## 足迹分析

> 访客类型

* 设备类型
    - PC
    - 移动端
    - 搜索引擎
        * 引擎类型
            - 谷歌
            - 百度
            - 必应
            - 搜狗
    - 其他
* 操作系统
    - 安卓
    - IOS
    - Windows
    - 其他
* 浏览器
    - 火狐
    - Chrome
    - IE
    - 其他
* 访客
    - 按浏览量（PV）
    - 按IP（UV）
        - 依据TA最近一次的访问数据线上
* 访问时段
    - 开始时间
    - 结束时间
* 访问频次（可能不会做）
    - 忠诚度计算：按天，计算来访的次数
    
> 文章概况

* 总浏览数
* 单位时间，访问次数
* 评论次数
* 统计时间区间
* 判断是否为火热文章
* 判断是否为置顶文章
* 给出通过以上条件计算出文章优质点数

> 封杀IP历史
    
nginx 层面，访问频次，我做了限制，基本不会有数据，这个模块可能会去掉

## 系统配置

> 图床

* 上传
    - 七牛
    - QQ
    - sm.ms
* 上传历史展示

> SQL备份

这块儿没必要做成活的了，直接放.env里面就行了


## 监控系统

* 采集配置
    - 监控项目
        - 选择，自定义过的项目类别，后面方便展示
    - 书写SQL
        - 用于采集的SQL，取运行结果的第一列的值，作为采集结果
        - 选择的库，要求在 config/database.php　中　connections　这列，以 collect_开头的，作为选项
    - 采集频率
        - 每分去采集过去固定时长的每分钟的未采集过的数据
            - 要求记录采集的开始时间，只精确到分钟
            - 如果是大SQL，指定采集间隔
            - 每次采集，记录实时计算出来的报警值
        - 注：每次采集的时候才会去判断是否命中，并记录实时报警真实样本
    - 复合报警策略
        - 报警描述
            - 规则描述，如，5分钟等于0
        - 报警样本采集，单位周期值
            - 如，7天则填的数字 7
        - 报警样本采集周期单位
            - 分钟、小时、天
        - 报警样本对比符号
            - 如，当前值 > 样本值，则填写 '>'
        - 报警样本类型
            - 平均值、求和
        - 真实报警样本值占计算出来的报警样本的百分比
            - 如，80%，则填 80
        - 连续命中真实报警样本规则次数
            - 如，80%，则填 80
        - 显示到后台折线图情况
            - 是、否
    - 动态报警样本采集
        - 过去固定时间长的，与当前分钟相同的几个点的数据依据线性回归进行计算
    - 报警渠道配置
        - 玎玎【推荐】或者邮件
        - 短信（显示选中选项，但不触发真实功能）
        - 电话（显示选中选项，但不触发真实功能）
* 实时渲染
    * Echart 折线图渲染
        * 依据显示到后台折线图情况的开关，选择性展示数据
            - 展示形式：
                - 依据时段、时间粒度、名称搜索
                - 列表分页，概览监控项
                - 点击查看详情，单独生成一个echarts页面
                    - 要求搜索条件与列表分页保持一致